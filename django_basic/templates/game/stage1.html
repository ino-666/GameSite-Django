<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
</head>
<body>
    <style>
        body {
            background-color: rgb(152, 162, 165); /* èƒŒæ™¯è‰²ã®è¨­å®š */
            color: white; /* ãƒ†ã‚­ã‚¹ãƒˆè‰²ã®è¨­å®š */
        }
        
        #myButton {
            position: absolute; /* ãƒœã‚¿ãƒ³ã®ä½ç½®ã‚’çµ¶å¯¾ä½ç½®ã«è¨­å®š */
            left: 50%; /* å·¦ã‹ã‚‰50%ã®ä½ç½®ã«é…ç½® */
            top: 50%; /* ä¸Šã‹ã‚‰50%ã®ä½ç½®ã«é…ç½® */
            transform: translate(-50%, -50%); /* ä½ç½®èª¿æ•´ã®ãŸã‚ã®å¤‰æ› */
        
            /* ãƒœã‚¿ãƒ³ã‚’å††å½¢ã«ã—ã€ã‚µã‚¤ã‚ºã‚’å¤§ããã™ã‚‹ãŸã‚ã®è¨­å®š */
            width: 50px;  /* å¹…ã®è¨­å®š */
            height: 50px; /* é«˜ã•ã®è¨­å®š */
            border-radius: 50%; /* ãƒœã‚¿ãƒ³ã‚’å††å½¢ã«ã™ã‚‹ãŸã‚ã®è¨­å®š */
            font-size: 20px; /* ãƒœã‚¿ãƒ³å†…ãƒ†ã‚­ã‚¹ãƒˆã®ã‚µã‚¤ã‚ºèª¿æ•´ */
            text-align: center; /* ãƒ†ã‚­ã‚¹ãƒˆã‚’ä¸­å¤®å¯„ã›ã«ã™ã‚‹ */
            line-height: 50px; /* ãƒ†ã‚­ã‚¹ãƒˆã‚’å‚ç›´æ–¹å‘ã«ä¸­å¤®å¯„ã›ã«ã™ã‚‹ï¼ˆheightã¨ä¸€è‡´ã•ã›ã‚‹ï¼‰ */
        }
        
        .randomButton {
            position: absolute; /* ãƒœã‚¿ãƒ³ã®ä½ç½®ã‚’çµ¶å¯¾ä½ç½®ã«è¨­å®š */
            left: 50%; /* å·¦ã‹ã‚‰50%ã®ä½ç½®ã«é…ç½® */
            top: 50%; /* ä¸Šã‹ã‚‰50%ã®ä½ç½®ã«é…ç½® */
            transform: translate(-50%, -50%); /* ä½ç½®èª¿æ•´ã®ãŸã‚ã®å¤‰æ› */
        
            /* ãƒœã‚¿ãƒ³ã‚’å††å½¢ã«ã—ã€ã‚µã‚¤ã‚ºã‚’å¤§ããã™ã‚‹ãŸã‚ã®è¨­å®š */
            width: 50px;  /* å¹…ã®è¨­å®š */
            height: 50px; /* é«˜ã•ã®è¨­å®š */
            border-radius: 50%; /* ãƒœã‚¿ãƒ³ã‚’å††å½¢ã«ã™ã‚‹ãŸã‚ã®è¨­å®š */
            font-size: 20px; /* ãƒœã‚¿ãƒ³å†…ãƒ†ã‚­ã‚¹ãƒˆã®ã‚µã‚¤ã‚ºèª¿æ•´ */
            text-align: center; /* ãƒ†ã‚­ã‚¹ãƒˆã‚’ä¸­å¤®å¯„ã›ã«ã™ã‚‹ */
            line-height: 50px; /* ãƒ†ã‚­ã‚¹ãƒˆã‚’å‚ç›´æ–¹å‘ã«ä¸­å¤®å¯„ã›ã«ã™ã‚‹ï¼ˆheightã¨ä¸€è‡´ã•ã›ã‚‹ï¼‰ */
        }
        
        #startText {
            position: absolute; /* ãƒ†ã‚­ã‚¹ãƒˆã®ä½ç½®ã‚’çµ¶å¯¾ä½ç½®ã«è¨­å®š */
            top: 20%; /* ä¸Šã‹ã‚‰20%ã®ä½ç½®ã«é…ç½® */
            left: 50%; /* å·¦ã‹ã‚‰50%ã®ä½ç½®ã«é…ç½® */
            transform: translate(-50%, -50%); /* ä½ç½®èª¿æ•´ã®ãŸã‚ã®å¤‰æ› */
            font-size: 60px; /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã®è¨­å®š */
            text-align: center; /* ãƒ†ã‚­ã‚¹ãƒˆã‚’ä¸­å¤®å¯„ã›ã«ã™ã‚‹ */
            /* å¿…è¦ã«å¿œã˜ã¦ä»–ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’è¿½åŠ  */
        }
    </style>
    <button id="myButton">â˜†</button> <!-- ãƒœã‚¿ãƒ³ã‚’è¨­ç½® -->
    <div id="startText">ã‚ˆãƒ¼ã„</div> <!-- ã‚¹ã‚¿ãƒ¼ãƒˆãƒ†ã‚­ã‚¹ãƒˆã‚’è¨­ç½® -->
    <script>
        var button = document.getElementById('myButton'); // ãƒœã‚¿ãƒ³è¦ç´ ã‚’å–å¾—
        var startText = document.getElementById('startText'); // ã‚¹ã‚¿ãƒ¼ãƒˆãƒ†ã‚­ã‚¹ãƒˆè¦ç´ ã‚’å–å¾—
        var loadTime; // ãƒšãƒ¼ã‚¸ã®èª­ã¿è¾¼ã¿æ™‚é–“ã‚’æ ¼ç´ã™ã‚‹å¤‰æ•°
        var userId = {{ user.id }};



        //æ­£è§£ã®ãƒœã‚¿ãƒ³ã«é–¢ã™ã‚‹å‡¦ç†
        button.onmouseover = function(event) { // ãƒœã‚¿ãƒ³ã«ã‚«ãƒ¼ã‚½ãƒ«ãŒä¹—ã£ãŸæ™‚ã®å‹•ä½œ
            event.preventDefault();

            setTimeout(function(){
                var randomX = Math.random() * (window.innerWidth - button.offsetWidth);
                var randomY = Math.random() * (window.innerHeight - button.offsetHeight);
                button.style.left = randomX + 'px'; // ãƒœã‚¿ãƒ³ã®Xåº§æ¨™ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«è¨­å®šã€ä½ç½®æ›¿ãˆã¯cssã®å€¤ã‚’å¤‰æ›´ã«ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦å¯èƒ½ã«ã—ã¦ã„ã‚‹
                button.style.top = randomY + 'px'; // ãƒœã‚¿ãƒ³ã®Yåº§æ¨™ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«è¨­å®š
            }, 90);
        }

        //ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢ã®å‡¦ç†
        button.onclick = function(event) { 
            event.preventDefault();
            var clickTime = new Date().getTime();
            var timeElapsed = (clickTime - loadTime)/1000; 
            alert('ã‚¯ãƒªãƒƒã‚¯æˆåŠŸï¼ è¨˜éŒ²ã¯ ' + timeElapsed + ' ç§’!'); 
        
            // stage_cleart ã‚’å¢—ã‚„ã™å‡¦ç†ã‚’è¿½åŠ 
            var xhr = new XMLHttpRequest();
            xhr.open('POST', 'increase_stage_clear/', true);
            xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
            xhr.send('id=' + userId); // ã“ã“ã§å¿…è¦ãª id ã‚’é€ä¿¡ã™ã‚‹
            
            window.location.href = "http://127.0.0.1:8000/accounts/stageselect"; 
        }

        //ã¯ãšã‚Œã®ãƒœã‚¿ãƒ³ã«é–¢ã™ã‚‹å‡¦ç†,ã“ã®é–¢æ•°ã¯ä¸‹ã®setTimeoutã‹ã‚‰ï¼“ç§’ã”ã¨ã«å‘¼ã³å‡ºã•ã‚Œã¦ã„ã‚‹
        function addRandomButtonEveryThreeSeconds() { // 3ç§’ã”ã¨ã«ãƒ©ãƒ³ãƒ€ãƒ ãƒœã‚¿ãƒ³ã‚’è¿½åŠ ã™ã‚‹é–¢æ•°
            setInterval(function() {
                var randomButton = document.createElement("button"); // ãƒœã‚¿ãƒ³ã‚’ä½œæˆ
                randomButton.innerText = "â˜†"; // ãƒœã‚¿ãƒ³ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨­å®š
                randomButton.className = "randomButton"; // ãƒœã‚¿ãƒ³ã«ã‚¯ãƒ©ã‚¹ã‚’ä»˜ä¸
                var randomX = Math.random() * (window.innerWidth - randomButton.offsetWidth);
                var randomY = Math.random() * (window.innerHeight - randomButton.offsetHeight);
                randomButton.style.left = randomX + 'px'; // ãƒœã‚¿ãƒ³ã®Xåº§æ¨™ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«è¨­å®š
                randomButton.style.top = randomY + 'px'; // ãƒœã‚¿ãƒ³ã®Yåº§æ¨™ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«è¨­å®š
                randomButton.style.display = "block"; // ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
                randomButton.onclick = function(event) { // ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸæ™‚ã®å‹•ä½œ
                    event.preventDefault();
                    alert('ã¯ãšã‚Œï½ğŸ¤£ğŸ¤£ğŸ¤£'); // ã¯ãšã‚Œã®ã‚¢ãƒ©ãƒ¼ãƒˆ
                }
                document.body.appendChild(randomButton); // ãƒœã‚¿ãƒ³ã‚’ç”»é¢ã«è¿½åŠ 
            }, 2000);
        }
        
        //æœ€åˆã«å‡ºã¦ãã‚‹ã€Œã‚ˆãƒ¼ã„ã€ã‚¹ã‚¿ãƒ¼ãƒˆï¼ã€ã‚’è¡¨ç¤ºã•ã›ã‚‹ãŸã‚ã®å‡¦ç†
        window.onload = function() { // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®å‹•ä½œ
            startText.style.display = "block"; // ã‚¹ã‚¿ãƒ¼ãƒˆãƒ†ã‚­ã‚¹ãƒˆã‚’è¡¨ç¤º
            setTimeout(function() {
                startText.textContent = "ã‚¹ã‚¿ãƒ¼ãƒˆï¼"; // ã‚¹ã‚¿ãƒ¼ãƒˆãƒ†ã‚­ã‚¹ãƒˆã‚’å¤‰æ›´
                loadTime = new Date().getTime(); // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚é–“ã‚’å–å¾—
                setTimeout(function() {
                    startText.style.display = "none"; // ã‚¹ã‚¿ãƒ¼ãƒˆãƒ†ã‚­ã‚¹ãƒˆã‚’éè¡¨ç¤º
                    addRandomButtonEveryThreeSeconds(); // 3ç§’ã”ã¨ã«ãƒ©ãƒ³ãƒ€ãƒ ãƒœã‚¿ãƒ³ã‚’è¿½åŠ ã™ã‚‹é–¢æ•°ã‚’å‘¼ã³å‡ºã—
                }, 1000);
            }, 1000);
        }
    </script>
</body>
</html>